<!doctype html>
<html>
<head>
	<title>perfslides
		::
		A sample website to demonstrate the use of browser-perf and perfkanie</title>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A sample website to demonstrate the use of browser-perf and perfkanie
	">
	<meta name="author" content="Parashuram &lt;code@r.nparashuram.com&gt;
	">
	<link rel="stylesheet" href = "bootstrap/dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href = "css/main.css"/>
</head>
<body class = "site">
	<ul class = "slides">
		<li>
			<div class = "title">
	<div class = "container">
		<div class="row">
			<div class="col-lg-6">
				<h1>Automating Web Performance Metrics</h1>
				<h3>and making it a part of continuous integration</h3>
			</div>
			<div class="col-lg-6">
				<img class="img-responsive site-only" src="img/ipad-hand.png" alt="">
			</div>
		</div>
		<h2 class = "slide-only author">
			@nparashuram
		</h2>
	</div>
</div></li>
		<li>
			<div class = "why-performance container">
	<div class = "row">
		<div class="col-lg-6 col-lg-offset-3">
			<h1>Why care about performance ?</h1>
			<div class = "slide-only step">
				<span class = "glyphicon glyphicon-forward"></span>
			</div>
		</div>
	</div>
	<div class = "speaker-notes row">
		<div class = "col-lg-6 text-left">
			<p>
				Webpage performance influences user experience and has direct impact on user engagement. Studies have shown strong correlation between revenue web performance.
			</p>
			<p>
				Delivering the web page as soon as possible and then ensuring that the user interacts smoothly with the web page are key to a good user experience.  
			</p>
		</div>
		<div class = "col-lg-6">
			<blockquote>
				<p>
					We did a test where we artificially [slowed the framerate from 60fps to 30fps], and engagement collapsed.
				</p>
				<footer>
					<cite>Shane O' Sullivan</cite>
					, Facebook
					<a slides = "Video" target = "_blank" href = "https://www.youtube.com/watch?v=3-WYu_p5rdU#t=35m57s">
						<span class = "glyphicon glyphicon-facetime-video"></span>
					</a>
				</footer>
			</blockquote>
			<blockquote>
				<p>
					Etsy tested tested pre-fetching JS in search results page, which caused jank... All business metrics we monitored got much worse.
				</p>
				<footer>
					<cite>Jonathan Klein</cite>
					, Etsy
					<a title = "Presentation" target = "_blank" href="http://www.slideshare.net/jnklein/edge-conf-rendering-performance-panel">
						<span class = "glyphicon glyphicon-edit"></span>
					</a>
				</footer>
			</blockquote>
		</div>
	</div>
</div></li>
		<li>
			<div class = "container what-regression">
	<h1>Why does a page get slow ?</h1>
	<div class = "row speaker-notes">
		<div class = "col-lg-12">
			<p>
				Web pages can get slow due to various reasons, but they can usually be classified into the following three categories.
			</p>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-4 step">
			<div class = "images slide-only">
				<div  style="background-image: url(img/onecommit.jpg)" class = "slide-only img" source = "http://livingfitlovinglife.com/wp-content/uploads/2013/10/istock_end-of-the-rope1.jpg"></div>
				<div style="background-image: url(img/trollface-big.png)" class = "slide-only img step trollface" source="http://openclipart.org/detail/146953/troll-face---problem-by-master-sayien"></div>
			</div>
			<img src="img/trollface.png" class = "site-only" source="http://openclipart.org/detail/146953/troll-face---problem-by-master-sayien"/>
			<h4>One commit</h4>
			<p>
				On a friday night by that, in the file no one touches,
				<br/>
				by that one guy !!
			</p>
		</div>

		<div class="col-lg-4 step">
			<div style="background-image: url(img/overtime.jpg)" class = "slide-only img" source = "http://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Overloaded_truck.jpg/1280px-Overloaded_truck.jpg"></div>
			<img src="img/time.png" class = "site-only" source = "http://upload.wikimedia.org/wikipedia/commons/2/23/Flat_UI_-_time.png"/>
			<h4>Added Over time</h4>
			<p>With great code comes great performance problems</p>
		</div>

		<div class="col-lg-4 step">
			<div class = "images slide-only">
				<div  style="background-image: url(img/weeping-angels-closed.jpg)" class = "slide-only img" source = "http://www.flickr.com/photos/plasticrevolver/164351244/in/photostream/"></div>
				<div  style="background-image: url(img/weeping-angels-scary.jpg)" class = "slide-only img step" source = "http://www.flickr.com/photos/plasticrevolver/164351244/in/photostream/"></div>
				<div  style="background-image: url(img/kitten.jpg)" class = "slide-only img step" source = "http://www.flickr.com/photos/plasticrevolver/164351244/in/photostream/"></div>
			</div>

			<img src="img/heinsenbug.png" class = "site-only" source="http://openclipart.org/image/300px/svg_to_png/190578/forbidden-for-heisenbugs.png"/>
			<h4>
				<span class = "site-only">No clue</span>
				<span class = "slide-only">Don't Blink</span>
			</h4>
			<p>
				Don't turn your back. Don't look away.
				<br/>
				And don't blink. Good Luck.
			</p>
		</div>
	</div>
	<div class = "row speaker-notes">
		<p class = "lead">
			The web pages need to be delivered as fast as possible to the user. Equally important is the fact that the interactions on the web page feel smooth and jank-free. This presentation covers the latter - performance issues when interacting with the app.
		</p>
	</div>
</div></li>
		<li>
			<div class = "fixing-regressions container">
	<div class = "content">
		<h1>Fixing Performance Regressions</h1>
		<p class = "speaker-notes">
			Rules, tools, or a combination of rules and tools can be used to fix performance problems
		</p>
		<ul class="nav nav-tabs site-only">
			<li class="active">
				<a href="#tools" data-toggle="tab">Tools</a>
			</li>
			<li>
				<a href="#rules" data-toggle="tab">Rules</a>
			</li>
			<li>
				<a href="#rulestools" data-toggle="tab">Rules + Tools</a>
			</li>
		</ul>

		<div class="tab-content step">
			<div class="tab-pane active" id="tools">
				<h2>
					Tools
					<span class = "slide-only faded">+ Rules</span>
				</h2>
				<div class="row">
					<div class="col-xs-6 col-md-4">
						<a href="#" class="thumbnail">
							<img src="img/chromedev.png" alt="Chrome Developer Tools Screenshot"/>
						</a>
					</div>
					<div class="col-xs-6 col-md-4 step">
						<a href="#" class="thumbnail">
							<img src="img/f12.png" alt="..."/>
						</a>
					</div>
					<div class="col-xs-6 col-md-4 step">
						<a href="#" class="thumbnail">
							<img src="img/firefox.png" alt="..."/>
						</a>
					</div>
				</div>
				<div class = "speaker-notes">
					<p>
						Most modern web browsers have awesome tools that help developers understand how it works under the hood. It provides information about the time spent on various activilites like painting, calculating layouts or styles, etc.
					</p>
				</div>
			</div>
			<div class="tab-pane step" id="rules">
				<h2>
					<span class = "faded slide-only">Tools +</span>
					Rules
				</h2>
				<p class = "speaker-notes">
					When investigating performance problems with browser tools, we can often observe interesting patterns emerge. These patterns can be convereted to rules or "best-practices" that web developers follow when writing code for their pages. Many experts have formulated rules, some such rules are as follow
				</p>
				<ul>
					<li>
						Shard the domains to increase the number of parallel requests
					</li>
					<li>Enclose expensive javascript inside requestAnimationFrames</li>
					<li>Minize JS, Images and CSS, always zip over the wire</li>
					<li>
						Runtime performance checklist
						<a href = "http://calendar.perfplanet.com/2013/the-runtime-performance-checklist/"></a>
					</li>
					<li class = "slide-only"> <em>Pray to the demo gods before your presentation</em>
					</li>
				</ul>
			</div>
			<div class="tab-pane step" id="rulestools">
				<h2>Tools + Rules</h2>
				<p class = "speaker-notes">
					Remembering to follow all the rules when developing web pages is hard. Automated tools come to the rescue here, these are based on well established rules and can help identify problems during the development cycle. Some great tools that are based on well defined rules include the following.
				</p>
				<ul>
					<li>
						YSlow (
						<a href = "https://developer.yahoo.com/yslow/">link</a>
						)
					</li>
					<li>
						Google Page Speed (
						<a href = "https://developers.google.com/speed/pagespeed/">link</a>
						)
					</li>
					<li>
						modern.ie Page Scan (
						<a href = "http://modern.ie">link</a>
						)
					</li>
					<li>
						Webpagetest.org (
						<a href = "http://webpagetest.org">link</a>
						)
					</li>
				</ul>
			</div>
		</div>
	</div>
</div></li>
		<li>
			<div class = "fixing-everytime container">
  <div class = "content">
    <h1>Fixing Performance Regressions - Everytime</h1>
    <div class = "row">
      <div class = "col-md-6 text-left">
        <p class = "speaker-notes">
          Though most developers see value in running performance tests, expecting these tests to be run for every deploy is hard. Most of these tests have to be run manually, and are usually run when reacting to performance issues. 
          <br/>
          It would be even better if performance profiling can actually be automated. Just like unit tests are the defense against functional regressions, these automated performance tests could check for performance regressions. Like the unit tests, adding these to a coninuous integration server will add more value. 
        </p>

        <ul>
          <li>Run profiling for every commit - look for perf anit-patterns</li>
          <li class = "step">Can this manual task be automated ? </li>
          <li class = "step">Once automated, can it be added to continuous integration</li>
        </ul>
      </div>
      <div class = "col-md-6">
        <img class = "step" src = "img/automation.png" source = "http://xkcd.com/1319/"/>
      </div>
    </div>
  </div>
</div></li>
		<li>
			<div class = "container graphs">
	<h1 class = "site-only">Performance Graphs</h1>
  <p class = "speaker-notes lead">
    Examples of some of the graphs generated using automated rendering performance measurement tools
  </p>
	<div id = "graphs-carousel" class="carousel" data-ride="carousel">
      <ol class="carousel-indicators site-only">
        <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
        <li data-target="#carousel-example-generic" data-slide-to="1" class=""></li>
      </ol>
      <div class="carousel-inner">
        <div class="item active">
          <img src="img/topcoat.png">
        </div>
        <div class="item step">
          <img src="img/bootstrap.png">
        </div>
      </div>
      <a class="left carousel-control site-only" href="#graphs-carousel" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left"></span>
      </a>
      <a class="right carousel-control site-only" href="#graphs-carousel" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right"></span>
      </a>
    </div>
</div></li>
		<li>
			<div class = "rendering-perf container">
	<h3>
		<small class = "site-only">Some tools to</small>
		Measure rendering performance
	</h3>
	<div class = "step browsers">
		<ul class = "list-inline">
			<li>
				<div class = "img chrome"/>
			</li>
			<li>
				<div class = "img firefox"/>
			</li>
			<li>
				<div class = "img ie" />
			</li>
		</ul>
	</div>
	<div class = "step browser-perf-tool">
		<h1>
			<small>http://npmjs.org/package/</small>
			browser-perf
		</h1>
		<div class = "speaker-notes">
			is a NodeJS based tool that measures the runtime performance of web pages.
		</div>
		<ol>
			<li class = "step"> <em>Actions</em>
				<div class = "speaker-notes">
					The tool measures performance information when a user scenario is run. User actions are performed using Selenium scripts. Typical scenarios for collecting performance information could be a shopping website checkout process, or even a simple page scroll.
				</div>
			</li>
			<li class = "step"> <em>Probes</em>
				<div class = "speaker-notes">
					This tool simply automates the manual process of looking at developer tools to identiy performance anti-patterns. It collects data from sources like Chrome Developer tools profiling timelines, about:tracing, or WPA/Xperf in case of IE.
				</div>
			</li>
			<li class = "step">
				<em>Metrics</em>
				<div class = "speaker-notes">
					Once all the data is collected, it is combined into actionable metrics. Some of the metrics include the average time required to draw each frame, time spent calculating styles or layouts.
				</div>
			</li>
		</ol>
	</div>
	<div class = "step perfjankie">
		<h1>
			<small>http://npmjs.org/package/</small>
			Perfjankie
		</h1>
		<p class = "speaker-notes">
			Collecting performance information once is great, but it would be even more valuable is this data is available over time. Each new commit can then be compared against baseline measures, and single commits causes trouble can be weeded out. This would also give developers, a good handle on how adding additional features to a website may impact website performance. 
		</p>
		<p>Grunt task, run browser-perf, save data to couchdb</p>
	</div>
	<div class = "step couchdb">
		<h2>CouchDB</h2>
		<p>Data store and web page for graphs</p>
	</div>
</div></li>
		<li>
			<div class = "demo">
	<div class = "container">
		<h1>Demo time</h1>
		<div class = "speaker-notes">
			Trying out browser-perf and perfjankie are very simple. This project uses both the tools to look at performance impact across 5 commits.
			<br/>
			To run this, simply clone this repository using<code>git clone <a href = "git://github.com/axemclion/perfslides.git">git://github.com/axemclion/perfslides.git</a></code>
			<br/>
			<br/>
			Check out the README.md file in the project for more information about setting up the dev environment and running the tests on your environment. 
			<br/>
		</div>
	</div>
</div></li>
		<li>
			<div class = "commit-list container">
	<h1>Performance Changes over 5 commits</h1>
	<div class = "speaker-notes">
		<h3>
			<a href = "/perfjankie/index.html">Check out the rendering performance graphs for this website</a>
		</h3>
		<p>
			The five commits that were profiles are as follows
		</p>
	</div>
	<div class = "container">
		<ol class = "output">
			<li>Basic version of the site with bootstrap</li>
			<li>Responsive images, hide unnecessary content</li>
			<li class = "sep">Expensive Scroll handler</li>
			<li>Delegation to requestAnimationFrame, CSS3D transforms</li>
			<li class = "sep">Social Button - third party scripts</li>
		</ol>
	</div>
</div></li>
		<li>
			<div class = "results container">
	<h1>Looking at the results again</h1>
	<ul>
		<li class = "step">
			Adding rendering perf profiling to continuous integration is not hard
		</li>
		<li class = "step">Graphs over time help identify offending code segments</li>
		<li class = "step">
			Beware of Microbenchmarks
			<ul class = "sub-list">
				<li class = "step">Selenium scripts adds to time taken</li>
				<li class = "step">Browsers try to optimize the best they can</li>
				<li class = "step">Impact of other things like system load, caches, etc</li>
			</ul>
		</li>
		<li class = "step">
			Lots of interesting data
			<span class = "step">, but not all data is useful</span>
		</li>
	</ul>
</div></li>
		<li>
			<div class = "use-it container">
	<h1>Can I use ?</h1>
	<div>
		<p class = "step">
			Install browser-perf from
			<img src = "img/npm.png"/>
			. Run it from the
			<img src = "img/terminal.png"/>
			or add it to a CI system like
			<img src = "img/jenkins.png"/>
			.
		</p>

		<p class = "step">
			Alternatively, add perfjankie task into
			<img src = "img/grunt.png"/>
			build process.
			<br/>
			All data and HTML/JS for the graphs are saved in
			<img src = "img/couchdb.png"/>
			.
		</p>
		<p class = "step">
			Tests are run using
			<img src = "img/selenium.png"/>
			locally, or using services like
			<img src = "img/saucelabs.png"/> or <img src = "img/browserstack.png"/>
		</p>
		<p class = "step">Existing Selenium tests can also be reused to collect metrics from <img src = "img/browsers.png"/></p>
	</div>
</div></li>
		<li>
			<div class = "thankyou container">
	<div class = "row">
		<div class = "col-lg-7">
			<h3 class = "site-only">Links</h3>
			<p class = "site-only">These slides are at</p>
			<img src = "img/qr.png" class = "slide-only"/>
			<h1 class = "homepage">
				<a href = "
					">
					https://nparashuram.com/perfslides</a>
			</h1>
			<p class = "site-only">The source code this page lives at</p>
			<h1 class = "site-only">
				<a href = "git://github.com/axemclion/perfslides.git
					">
					git://github.com/axemclion/perfslides.git</a>
			</h1>
		</div>
		<h3 class = "speaker-notes">More links</h3>
		<ul class = "speaker-notes">
			<li>
				browser-perf (
				<a href = "http://npmjs.org/package/browser-perf">npm</a>
				,
				<a href = "http://github.com/axemclion/browser-perf">source code</a>
				)
			</li>
			<li>
				perfjankie (
				<a href = "http://npmjs.org/package/perfjankie">npm</a>
				,
				<a href = "http://github.com/axemclion/perfjankie">source code</a>
				)
			</li>
			<li>
				<a href = "/perfjankie">Performance Graphs for this website</a>
			</li>
		</ul>
		<div class = "col-lg-5">
			<h3 class= "site-only">Author information</h3>
			<h1>Parashuram</h1>
			<p class = "speaker-notes">
				Ping me on twitter and I would be glad to help you with adding browser-perf or perfjankie to your continuous integration system.
			</p>
			<ul class = "list-unstyled">
				<li>
					<span class = "glyphicon glyphicon-link"></span>
					<a href = "nparashuram.com">http://nparashuram.com</a>
				</li>
				<li>
					<img class = "contact" src = "img/twitter.png"/>
					<a href = "http://twitter.com/nparashuram">@nparashuram</a>
				</li>
				<li>
					<img class = "contact" src = "img/github.png"/>
					<a href = "http://github.com/axemclion">axemclion</a>
				</li>
			</ul>
		</div>
	</div>
</div></li>
	</ul>
	<div class="btn-group main-menu hidden-xs">
		<button type="button" class="prev-slide slide-only btn btn-default">
			<span class = "glyphicon glyphicon-chevron-left"></span>
		</button>
		<button type="button" class="presentation-mode site-only btn btn-default" data-toggle="dropdown">
			<span class = "glyphicon glyphicon glyphicon-fullscreen"></span>
		</button>
		<button type="button" class="presentation-mode slide-only btn btn-default">
			<span class = "glyphicon glyphicon glyphicon-remove-circle"></span>
		</button>
		<button type="button" class="next-slide slide-only btn btn-default">
			<span class = "glyphicon glyphicon-chevron-right"></span>
		</button>
	</div>
	<script type = "text/javascript" src = "jquery/dist/jquery.js"></script>
	<script type = "text/javascript" src = "bootstrap/dist/js/bootstrap.min.js"></script>
	<script type = "text/javascript" src = "js/main.js"></script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-617499-9', 'github.com');
	  ga('send', 'pageview');
	</script>
</body>
</html>